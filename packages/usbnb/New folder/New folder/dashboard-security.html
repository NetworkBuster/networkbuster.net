<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NetworkBuster Security & Timeline Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0f1e 0%, #1a1a2e 100%);
            color: #fff;
            padding: 20px;
            min-height: 100vh;
        }

        .header {
            text-align: center;
            padding: 30px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #00f0ff, #0080ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .status-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .status-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 240, 255, 0.2);
        }

        .status-emoji {
            font-size: 4em;
            text-align: center;
            margin-bottom: 15px;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .status-label {
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .status-value {
            text-align: center;
            font-size: 1.5em;
            color: #00f0ff;
        }

        .status-SAFE { color: #00ff88; }
        .status-WARNING { color: #ffaa00; }
        .status-AMBER_ALERT { color: #ff8800; }
        .status-CRITICAL { color: #ff3333; }

        .alerts-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        .alert-item {
            background: rgba(255, 136, 0, 0.1);
            border-left: 4px solid #ff8800;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
        }

        .alert-item.critical {
            background: rgba(255, 51, 51, 0.1);
            border-left-color: #ff3333;
        }

        .timeline-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        .timeline-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border-left: 3px solid #00f0ff;
        }

        .timeline-time {
            min-width: 150px;
            color: #00f0ff;
            font-weight: bold;
        }

        .timeline-content {
            flex: 1;
        }

        .btn {
            background: linear-gradient(45deg, #00f0ff, #0080ff);
            border: none;
            color: white;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 240, 255, 0.4);
        }

        .btn-danger {
            background: linear-gradient(45deg, #ff3333, #ff6666);
        }

        .controls {
            text-align: center;
            margin: 30px 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-box {
            background: rgba(0, 240, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-number {
            font-size: 2.5em;
            color: #00f0ff;
            font-weight: bold;
        }

        .stat-label {
            font-size: 0.9em;
            color: #94a3b8;
            margin-top: 5px;
        }

        .bios-section {
            background: linear-gradient(135deg, rgba(0, 240, 255, 0.1), rgba(0, 128, 255, 0.1));
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid rgba(0, 240, 255, 0.3);
        }

        .bios-status {
            font-size: 1.2em;
            margin: 15px 0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
        }

        .loading {
            text-align: center;
            padding: 50px;
            font-size: 1.5em;
            color: #00f0ff;
        }

        .prediction-box {
            background: rgba(255, 170, 0, 0.1);
            border: 2px dashed #ffaa00;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .prediction-label {
            font-size: 1.1em;
            color: #ffaa00;
            font-weight: bold;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üõ°Ô∏è NetworkBuster Command Center</h1>
        <p>Security Monitor ‚Ä¢ Timeline Tracker ‚Ä¢ BIOS Optimization</p>
    </div>

    <div class="status-grid">
        <div class="status-card">
            <div class="status-emoji" id="securityEmoji">üü¢</div>
            <div class="status-label">Security Status</div>
            <div class="status-value" id="securityLevel">Loading...</div>
        </div>

        <div class="status-card">
            <div class="status-emoji">‚è∞</div>
            <div class="status-label">Timeline Status</div>
            <div class="status-value" id="timelineStatus">Loading...</div>
        </div>

        <div class="status-card">
            <div class="status-emoji">‚ö°</div>
            <div class="status-label">System Performance</div>
            <div class="status-value" id="performanceStatus">Loading...</div>
        </div>
    </div>

    <div class="stats-grid">
        <div class="stat-box">
            <div class="stat-number" id="totalThreats">0</div>
            <div class="stat-label">Total Threats Blocked</div>
        </div>
        <div class="stat-box">
            <div class="stat-number" id="activeThreats">0</div>
            <div class="stat-label">Active Threats</div>
        </div>
        <div class="stat-box">
            <div class="stat-number" id="blockedIPs">0</div>
            <div class="stat-label">Blocked IPs</div>
        </div>
        <div class="stat-box">
            <div class="stat-number" id="timelineEvents">0</div>
            <div class="stat-label">Timeline Events</div>
        </div>
    </div>

    <div class="bios-section">
        <h2>üîß BIOS Optimization Status</h2>
        <div class="bios-status">
            ‚úÖ <strong>Guide Available:</strong> BIOS-OPTIMIZATION-GUIDE.md<br>
            ‚ö° <strong>Boot Scripts:</strong> boot-to-bios.bat, boot-to-bios.ps1<br>
            üéØ <strong>Expected Performance Gain:</strong> 20-30% CPU, 15-25% Memory, 40-60% Boot Speed<br>
            üîí <strong>Security:</strong> Virtualization enabled for Docker/Hyper-V support
        </div>
        <button class="btn" onclick="window.open('BIOS-OPTIMIZATION-GUIDE.md')">
            üìñ View BIOS Guide
        </button>
        <button class="btn" onclick="alert('Run boot-to-bios.ps1 as Administrator to reboot into BIOS')">
            üöÄ Boot to BIOS
        </button>
    </div>

    <div class="alerts-section">
        <h2>üü† Recent Amber Alerts</h2>
        <div id="alertsList" class="loading">Loading alerts...</div>
    </div>

    <div class="prediction-box">
        <div class="prediction-label">üîÆ Future Predictions</div>
        <div id="predictions">Analyzing patterns...</div>
    </div>

    <div class="timeline-section">
        <h2>‚è∞ Recent Timeline Events</h2>
        <div id="timelineList" class="loading">Loading timeline...</div>
    </div>

    <div class="controls">
        <button class="btn" onclick="refreshAll()">üîÑ Refresh All</button>
        <button class="btn" onclick="exportTimeline()">üì• Export Timeline</button>
        <button class="btn btn-danger" onclick="clearAlerts()">üóëÔ∏è Clear Alerts</button>
    </div>

    <script>
        const SECURITY_API = 'http://localhost:3006/api/security';
        const TIMELINE_API = 'http://localhost:3007/api/timeline';

        async function fetchSecurityStatus() {
            try {
                const response = await fetch(`${SECURITY_API}/status`);
                const data = await response.json();

                document.getElementById('securityEmoji').textContent = data.status;
                document.getElementById('securityLevel').textContent = data.level;
                document.getElementById('securityLevel').className = `status-value status-${data.level}`;
                
                document.getElementById('totalThreats').textContent = data.statistics.totalThreats;
                document.getElementById('activeThreats').textContent = data.statistics.activeThreats;
                document.getElementById('blockedIPs').textContent = data.statistics.blockedIPs;
            } catch (error) {
                console.error('Security API error:', error);
                document.getElementById('securityLevel').textContent = 'Offline';
            }
        }

        async function fetchAmberAlerts() {
            try {
                const response = await fetch(`${SECURITY_API}/amber-alerts`);
                const data = await response.json();

                const alertsList = document.getElementById('alertsList');
                
                if (data.alerts.length === 0) {
                    alertsList.innerHTML = '<p>No amber alerts. System is secure. ‚úÖ</p>';
                } else {
                    alertsList.innerHTML = data.alerts.slice(0, 10).map(alert => `
                        <div class="alert-item ${alert.level === 'CRITICAL' ? 'critical' : ''}">
                            ${alert.status} <strong>${alert.type}</strong><br>
                            Source: ${alert.source.ip || 'Unknown'}<br>
                            Time: ${new Date(alert.timestamp).toLocaleString()}<br>
                            Action: ${alert.action}
                        </div>
                    `).join('');
                }
            } catch (error) {
                console.error('Alerts API error:', error);
                document.getElementById('alertsList').textContent = 'Failed to load alerts';
            }
        }

        async function fetchTimeline() {
            try {
                const response = await fetch(`${TIMELINE_API}/past?limit=10`);
                const data = await response.json();

                document.getElementById('timelineEvents').textContent = data.total;
                document.getElementById('timelineStatus').textContent = `${data.total} Events Recorded`;

                const timelineList = document.getElementById('timelineList');
                
                if (data.events.length === 0) {
                    timelineList.innerHTML = '<p>No timeline events yet.</p>';
                } else {
                    timelineList.innerHTML = data.events.map(event => `
                        <div class="timeline-item">
                            <div class="timeline-time">${new Date(event.timestamp).toLocaleString()}</div>
                            <div class="timeline-content">
                                <strong>${event.type}</strong><br>
                                ${JSON.stringify(event.data).substring(0, 100)}...
                            </div>
                        </div>
                    `).join('');
                }
            } catch (error) {
                console.error('Timeline API error:', error);
                document.getElementById('timelineStatus').textContent = 'Offline';
            }
        }

        async function fetchPredictions() {
            try {
                const response = await fetch(`${TIMELINE_API}/future`);
                const data = await response.json();

                const predictions = document.getElementById('predictions');
                
                if (data.predictions.length === 0) {
                    predictions.innerHTML = '<p>No predictions available. System operating normally.</p>';
                } else {
                    predictions.innerHTML = data.predictions.map(pred => `
                        <p>
                            <strong>${pred.type}</strong> (Confidence: ${(pred.confidence * 100).toFixed(0)}%)<br>
                            Expected: ${new Date(pred.timestamp).toLocaleString()}<br>
                            ${pred.description || pred.reasoning}
                        </p>
                    `).join('');
                }
            } catch (error) {
                console.error('Predictions API error:', error);
            }
        }

        async function refreshAll() {
            await Promise.all([
                fetchSecurityStatus(),
                fetchAmberAlerts(),
                fetchTimeline(),
                fetchPredictions()
            ]);
        }

        async function exportTimeline() {
            try {
                window.open(`${TIMELINE_API}/export?format=json`, '_blank');
            } catch (error) {
                alert('Export failed: ' + error.message);
            }
        }

        async function clearAlerts() {
            if (!confirm('Are you sure you want to clear all alerts?')) {
                return;
            }

            try {
                const response = await fetch(`${SECURITY_API}/alerts/clear`, {
                    method: 'POST'
                });
                const data = await response.json();
                alert(`Cleared ${data.cleared} alerts`);
                refreshAll();
            } catch (error) {
                alert('Failed to clear alerts: ' + error.message);
            }
        }

        // Update system performance
        async function updatePerformance() {
            const response = await fetch(`${TIMELINE_API}/present`);
            const data = await response.json();
            
            if (data.snapshot) {
                const memPercent = ((data.snapshot.system.memory.used / data.snapshot.system.memory.total) * 100).toFixed(1);
                document.getElementById('performanceStatus').textContent = `Memory: ${memPercent}%`;
            }
        }

        // Initial load
        refreshAll();
        updatePerformance();

        // Auto-refresh every 10 seconds
        setInterval(refreshAll, 10000);
        setInterval(updatePerformance, 5000);
    </script>
</body>
</html>
