#!/bin/bash
set -e

# Debian postrm script
# Called after package removal

INSTALL_DIR="/opt/networkbuster"
SERVICE_USER="networkbuster"

case "$1" in
    remove)
        # Remove symlink
        rm -f /usr/local/bin/networkbuster || true
        ;;

    purge)
        # Remove installation directory and user
        rm -rf ${INSTALL_DIR} || true
        
        # Remove service user
        userdel ${SERVICE_USER} || true
        
        # Reload systemd
        systemctl daemon-reload || true
        ;;

    upgrade|failed-upgrade|abort-install|abort-upgrade|disappear)
        ;;

    *)
        echo "postrm called with unknown argument \`$1'" >&2
        exit 1
        ;;
esac

exit 0
