<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="900" height="260" viewBox="0 0 900 260">
  <style> .box{fill:#f3f4f6;stroke:#374151;stroke-width:1.5} .label{font:14px sans-serif;fill:#111827} .arrow{stroke:#111827;stroke-width:1.5;fill:none;marker-end:url(#a)} </style>
  <defs>
    <marker id="a" markerWidth="10" markerHeight="10" refX="6" refY="5" orient="auto">
      <path d="M0,0 L10,5 L0,10 z" fill="#111827" />
    </marker>
  </defs>

  <!-- Boxes -->
  <rect x="30" y="20" width="140" height="40" rx="6" class="box" />
  <text x="100" y="45" text-anchor="middle" class="label">Web UI</text>

  <rect x="220" y="20" width="140" height="40" rx="6" class="box" />
  <text x="290" y="45" text-anchor="middle" class="label">API Server</text>

  <rect x="410" y="20" width="140" height="40" rx="6" class="box" />
  <text x="480" y="45" text-anchor="middle" class="label">Profile Store</text>

  <rect x="600" y="20" width="140" height="40" rx="6" class="box" />
  <text x="670" y="45" text-anchor="middle" class="label">AI Client</text>

  <rect x="600" y="120" width="140" height="40" rx="6" class="box" />
  <text x="670" y="145" text-anchor="middle" class="label">LLM Provider</text>

  <!-- Arrows & annotations -->
  <path d="M170 40 L220 40" class="arrow" />
  <text x="195" y="30" class="label" text-anchor="middle">POST /api/recycle/recommend</text>

  <path d="M360 40 L410 40" class="arrow" />
  <text x="385" y="30" class="label" text-anchor="middle">loadProfile(userId)</text>

  <path d="M550 40 L600 40" class="arrow" />
  <text x="575" y="30" class="label" text-anchor="middle">getRecommendations()</text>

  <path d="M670 60 L670 120" class="arrow" />
  <text x="700" y="95" class="label">prompt + context</text>

  <path d="M670 160 L670 200" class="arrow" />
  <text x="700" y="180" class="label">JSON response or error</text>

  <path d="M600 80 L480 80" class="arrow" />
  <text x="540" y="70" class="label" text-anchor="middle">recommendations</text>

  <path d="M480 80 L360 80" class="arrow" />
  <text x="420" y="70" class="label" text-anchor="middle">return to API</text>

  <path d="M360 80 L170 80" class="arrow" />
  <text x="260" y="70" class="label" text-anchor="middle">response â†’ UI</text>

  <rect x="30" y="180" width="820" height="60" rx="6" fill="#fff7ed" stroke="#92400e" />
  <text x="70" y="210" class="label">Note: If no LLM key or model fails, AI Client falls back to deterministic heuristics.</text>
</svg>
